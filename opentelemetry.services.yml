services:
  opentelemetry.tracer:
    class: Drupal\opentelemetry\OpenTelemetryTracerService
    arguments:
      - '@config.factory'
      - '@logger.factory'

  plugin.manager.open_telemetry_span:
    class: Drupal\opentelemetry\OpenTelemetryTraceManager
    parent: default_plugin_manager

  Drupal\opentelemetry\EventSubscriber\RequestTraceEventSubscriber:
    arguments:
      - '@opentelemetry.tracer'
      - '@messenger'
    tags:
        - { name: event_subscriber }

  Drupal\opentelemetry\EventSubscriber\DatabaseStatementTraceEventSubscriber:
    arguments:
      - '@opentelemetry.tracer'
    tags:
        - { name: event_subscriber }
